{% extends "base.html" %}

{% block content %}
<div class="lessons-container {{ theme }}">
    <!-- Lesson Navigation -->
    <div class="lesson-sidebar {{ theme }}">
        <div class="sidebar-header {{ theme }}">
            <h2><i class="fas fa-graduation-cap"></i> Learning Path</h2>
            <p>Master Python & Web Development</p>
        </div>
        
        <div class="course-progress {{ theme }}">
            <div class="progress-info">
                <div class="progress-label">Course Progress</div>
                <div class="progress-percent">65%</div>
            </div>
            <div class="progress-bar {{ theme }}">
                <div class="progress-fill" style="width: 65%"></div>
            </div>
        </div>
        
        <nav class="lesson-nav {{ theme }}">
            <div class="nav-section {{ theme }}">
                <h3 class="section-title {{ theme }}">
                    <i class="fas fa-book"></i> Python Fundamentals
                </h3>
                <a href="{{ url_for('lessons', topic='python_basics') }}" 
                   class="nav-item {{ theme }} {{ 'active' if topic == 'python_basics' else '' }}">
                    <span class="nav-icon"><i class="fas fa-play-circle"></i></span>
                    <span class="nav-text">Python Basics</span>
                    <span class="nav-status completed"><i class="fas fa-check"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-code"></i></span>
                    <span class="nav-text">Control Structures</span>
                    <span class="nav-status completed"><i class="fas fa-check"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-function"></i></span>
                    <span class="nav-text">Functions & Modules</span>
                    <span class="nav-status in-progress"><i class="fas fa-spinner"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-layer-group"></i></span>
                    <span class="nav-text">Data Structures</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-cogs"></i></span>
                    <span class="nav-text">OOP in Python</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
            </div>
            
            <div class="nav-section {{ theme }}">
                <h3 class="section-title {{ theme }}">
                    <i class="fas fa-globe"></i> Web Development
                </h3>
                <a href="{{ url_for('lessons', topic='web_basics') }}" 
                   class="nav-item {{ theme }} {{ 'active' if topic == 'web_basics' else '' }}">
                    <span class="nav-icon"><i class="fas fa-html5"></i></span>
                    <span class="nav-text">HTML & CSS Basics</span>
                    <span class="nav-status completed"><i class="fas fa-check"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-js"></i></span>
                    <span class="nav-text">JavaScript Fundamentals</span>
                    <span class="nav-status in-progress"><i class="fas fa-spinner"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-server"></i></span>
                    <span class="nav-text">Backend with Flask</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
                <a href="{{ url_for('lessons', topic='database') }}" 
                   class="nav-item {{ theme }} {{ 'active' if topic == 'database' else '' }}">
                    <span class="nav-icon"><i class="fas fa-database"></i></span>
                    <span class="nav-text">Database Fundamentals</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
                <a href="{{ url_for('lessons', topic='advanced_python') }}" 
                   class="nav-item {{ theme }} {{ 'active' if topic == 'advanced_python' else '' }}">
                    <span class="nav-icon"><i class="fas fa-rocket"></i></span>
                    <span class="nav-text">Advanced Python</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
            </div>
            
            <div class="nav-section {{ theme }}">
                <h3 class="section-title {{ theme }}">
                    <i class="fas fa-project-diagram"></i> Projects
                </h3>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-gamepad"></i></span>
                    <span class="nav-text">Simple Game</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-shopping-cart"></i></span>
                    <span class="nav-text">E-commerce Site</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
                <a href="#" class="nav-item {{ theme }}">
                    <span class="nav-icon"><i class="fas fa-comments"></i></span>
                    <span class="nav-text">Chat Application</span>
                    <span class="nav-status locked"><i class="fas fa-lock"></i></span>
                </a>
            </div>
        </nav>
        
        <div class="sidebar-footer {{ theme }}">
            <div class="achievement-count {{ theme }}">
                <i class="fas fa-trophy"></i>
                <span>5/25 Achievements</span>
            </div>
            <a href="{{ url_for('dashboard') }}" class="btn {{ theme }} small">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="lesson-content {{ theme }}">
        <div class="lesson-header {{ theme }}">
            <div class="breadcrumbs {{ theme }}">
                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                <i class="fas fa-chevron-right"></i>
                <a href="#">Learning Path</a>
                <i class="fas fa-chevron-right"></i>
                <span>{{ lesson.title|default('Lesson') }}</span>
            </div>
            
            <h1 class="lesson-title {{ theme }}">
                <i class="fas fa-book-open"></i> {{ lesson.title|default('Python Fundamentals') }}
            </h1>
            
            <div class="lesson-meta {{ theme }}">
                <span class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>45 min</span>
                </span>
                <span class="meta-item">
                    <i class="fas fa-star"></i>
                    <span>Beginner</span>
                </span>
                <span class="meta-item">
                    <i class="fas fa-tasks"></i>
                    <span>{{ lesson.content|length if lesson.content else 5 }} topics</span>
                </span>
                <span class="meta-item">
                    <i class="fas fa-gem"></i>
                    <span>100 XP</span>
                </span>
            </div>
        </div>
        
        <div class="lesson-body {{ theme }}">
            <!-- Overview -->
            <div class="lesson-overview {{ theme }}">
                <h2><i class="fas fa-info-circle"></i> Overview</h2>
                <p>
                    {% if topic == 'python_basics' %}
                    Learn the fundamentals of Python programming, including variables, data types, 
                    control structures, and basic operations. This lesson provides the foundation 
                    for all future Python development.
                    {% elif topic == 'web_basics' %}
                    Introduction to web development with HTML, CSS, and JavaScript. Learn how to 
                    create structured web pages, style them effectively, and add interactivity.
                    {% elif topic == 'advanced_python' %}
                    Dive deep into advanced Python concepts including object-oriented programming, 
                    decorators, generators, and asynchronous programming.
                    {% elif topic == 'database' %}
                    Understand database fundamentals, SQL basics, and how to integrate databases 
                    with Python applications using SQLAlchemy.
                    {% else %}
                    Comprehensive learning materials to help you master programming concepts 
                    through interactive examples and hands-on practice.
                    {% endif %}
                </p>
            </div>
            
            <!-- Learning Objectives -->
            <div class="objectives {{ theme }}">
                <h2><i class="fas fa-bullseye"></i> Learning Objectives</h2>
                <ul class="objectives-list {{ theme }}">
                    {% if topic == 'python_basics' %}
                    <li>Understand Python syntax and basic programming concepts</li>
                    <li>Work with variables and different data types</li>
                    <li>Use control structures (if/else, loops)</li>
                    <li>Write and call functions</li>
                    <li>Handle basic input/output operations</li>
                    {% elif topic == 'web_basics' %}
                    <li>Create structured HTML documents</li>
                    <li>Style web pages using CSS</li>
                    <li>Add interactivity with JavaScript</li>
                    <li>Understand the DOM and event handling</li>
                    <li>Build responsive web designs</li>
                    {% elif topic == 'advanced_python' %}
                    <li>Master object-oriented programming in Python</li>
                    <li>Understand decorators and their applications</li>
                    <li>Work with generators and iterators</li>
                    <li>Implement asynchronous programming</li>
                    <li>Write efficient and maintainable code</li>
                    {% elif topic == 'database' %}
                    <li>Understand relational database concepts</li>
                    <li>Write basic SQL queries</li>
                    <li>Design database schemas</li>
                    <li>Integrate databases with Python</li>
                    <li>Perform CRUD operations</li>
                    {% else %}
                    <li>Master core programming concepts</li>
                    <li>Apply knowledge through hands-on projects</li>
                    <li>Develop problem-solving skills</li>
                    <li>Prepare for real-world development</li>
                    {% endif %}
                </ul>
            </div>
            
            <!-- Topics List -->
            <div class="topics {{ theme }}">
                <h2><i class="fas fa-list-ul"></i> Topics Covered</h2>
                <div class="topics-grid">
                    {% for item in lesson.content %}
                    <div class="topic-card {{ theme }}">
                        <div class="topic-header {{ theme }}">
                            <div class="topic-number">{{ loop.index }}</div>
                            <h3>{{ item }}</h3>
                        </div>
                        <div class="topic-body">
                            <p>
                                {% if topic == 'python_basics' %}
                                    {% if loop.index == 1 %}
                                    Variables are containers for storing data values. In Python, you don't need to declare variable types.
                                    {% elif loop.index == 2 %}
                                    Control structures help you control the flow of your program's execution.
                                    {% elif loop.index == 3 %}
                                    Functions are reusable blocks of code that perform specific tasks.
                                    {% elif loop.index == 4 %}
                                    Lists and dictionaries are powerful data structures for organizing data.
                                    {% elif loop.index == 5 %}
                                    Learn how to read from and write to files in Python.
                                    {% endif %}
                                {% elif topic == 'web_basics' %}
                                    {% if loop.index == 1 %}
                                    HTML provides the structure and content of web pages.
                                    {% elif loop.index == 2 %}
                                    CSS controls the visual presentation and layout of web pages.
                                    {% elif loop.index == 3 %}
                                    JavaScript adds interactivity and dynamic behavior to websites.
                                    {% elif loop.index == 4 %}
                                    HTTP is the protocol for transmitting web content.
                                    {% elif loop.index == 5 %}
                                    Flask is a lightweight Python web framework.
                                    {% endif %}
                                {% else %}
                                Detailed explanation and examples for this topic will be covered in the lesson.
                                {% endif %}
                            </p>
                            <div class="topic-actions">
                                <button class="btn {{ theme }} small" onclick="toggleExample('{{ loop.index }}')">
                                    <i class="fas fa-code"></i> Show Example
                                </button>
                                <button class="btn {{ theme }} outline small" onclick="toggleQuiz('{{ loop.index }}')">
                                    <i class="fas fa-question-circle"></i> Quick Quiz
                                </button>
                            </div>
                            
                            <!-- Example Code -->
                            <div class="topic-example" id="example-{{ loop.index }}" style="display: none;">
                                <pre class="code-block {{ theme }}"><code>
{% if topic == 'python_basics' %}
{% if loop.index == 1 %}
# Variables and Data Types
name = "Python Pathfinder"  # String
score = 100                 # Integer
rating = 4.8                # Float
is_awesome = True           # Boolean

print(f"Welcome to {name}!")
print(f"Current score: {score}")
print(f"Rating: {rating}")
print(f"Awesome: {is_awesome}")
{% elif loop.index == 2 %}
# Control Structures
age = 18

# If-else statement
if age >= 18:
    print("You are an adult")
else:
    print("You are a minor")

# For loop
for i in range(5):
    print(f"Count: {i}")

# While loop
count = 0
while count < 3:
    print(f"Counting: {count}")
    count += 1
{% elif loop.index == 3 %}
# Functions
def greet(name):
    """Greet a user by name"""
    return f"Hello, {name}!"

def add_numbers(a, b):
    """Add two numbers and return the result"""
    return a + b

# Using functions
message = greet("Coder")
print(message)

result = add_numbers(5, 3)
print(f"5 + 3 = {result}")
{% endif %}
{% elif topic == 'web_basics' %}
{% if loop.index == 1 %}
&lt;!-- HTML Structure --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;My Web Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Welcome to Web Development&lt;/h1&gt;
    &lt;p&gt;This is a paragraph of text.&lt;/p&gt;
    &lt;a href="#"&gt;This is a link&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
{% elif loop.index == 2 %}
/* CSS Styling */
body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    margin: 0;
    padding: 20px;
}

h1 {
    color: #333;
    text-align: center;
}

.button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.button:hover {
    background-color: #45a049;
}
{% elif loop.index == 3 %}
// JavaScript Basics
console.log("Hello, JavaScript!");

// Variables
let message = "Welcome to JavaScript";
const MAX_SCORE = 100;

// Function
function greetUser(name) {
    return `Hello, ${name}!`;
}

// Event listener
document.querySelector('.button').addEventListener('click', function() {
    alert('Button clicked!');
});
{% endif %}
{% else %}
# Example code will appear here
# Based on the selected topic
print("Learning is fun with Python Pathfinder!")
{% endif %}
                                </code></pre>
                                <button class="btn {{ theme }} small" onclick="runExample('{{ loop.index }}')">
                                    <i class="fas fa-play"></i> Run Code
                                </button>
                            </div>
                            
                            <!-- Quick Quiz -->
                            <div class="topic-quiz" id="quiz-{{ loop.index }}" style="display: none;">
                                <div class="quiz-question {{ theme }}">
                                    <p>
                                        {% if topic == 'python_basics' %}
                                            {% if loop.index == 1 %}
                                            What is the correct way to create a variable in Python?
                                            {% elif loop.index == 2 %}
                                            Which loop continues while a condition is true?
                                            {% elif loop.index == 3 %}
                                            What keyword is used to define a function in Python?
                                            {% else %}
                                            Test question for this topic
                                            {% endif %}
                                        {% elif topic == 'web_basics' %}
                                            {% if loop.index == 1 %}
                                            Which tag is used to create a hyperlink in HTML?
                                            {% elif loop.index == 2 %}
                                            What does CSS stand for?
                                            {% elif loop.index == 3 %}
                                            Which symbol is used for single-line comments in JavaScript?
                                            {% else %}
                                            Test question for this topic
                                            {% endif %}
                                        {% else %}
                                        What have you learned from this topic?
                                        {% endif %}
                                    </p>
                                </div>
                                <div class="quiz-options {{ theme }}">
                                    {% for option in ['Option A', 'Option B', 'Option C', 'Option D'] %}
                                    <label class="quiz-option {{ theme }}">
                                        <input type="radio" name="quiz-{{ loop.parent.loop.index }}" value="{{ option }}">
                                        <span class="option-text">{{ option }}</span>
                                    </label>
                                    {% endfor %}
                                </div>
                                <button class="btn {{ theme }} small" onclick="submitQuiz('{{ loop.index }}')">
                                    <i class="fas fa-check"></i> Submit Answer
                                </button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Practice Section -->
            <div class="practice-section {{ theme }}">
                <h2><i class="fas fa-laptop-code"></i> Hands-on Practice</h2>
                <div class="practice-card {{ theme }}">
                    <div class="practice-header {{ theme }}">
                        <h3>Interactive Challenge</h3>
                        <span class="difficulty-badge {{ theme }}">Beginner</span>
                    </div>
                    
                    <div class="practice-description">
                        <p>
                            {% if topic == 'python_basics' %}
                            Create a Python program that asks for the user's name and age, then prints a personalized greeting.
                            {% elif topic == 'web_basics' %}
                            Create a simple HTML page with a heading, paragraph, and styled button.
                            {% elif topic == 'advanced_python' %}
                            Implement a Python class that represents a bank account with deposit/withdraw methods.
                            {% elif topic == 'database' %}
                            Write SQL queries to create a users table and insert sample data.
                            {% else %}
                            Apply what you've learned by completing this coding challenge.
                            {% endif %}
                        </p>
                    </div>
                    
                    <div class="code-editor-practice {{ theme }}">
                        <div class="editor-header {{ theme }}">
                            <span><i class="fas fa-code"></i> practice.py</span>
                            <div class="editor-actions">
                                <button class="editor-btn" title="Reset">
                                    <i class="fas fa-redo"></i>
                                </button>
                                <button class="editor-btn" title="Format">
                                    <i class="fas fa-align-left"></i>
                                </button>
                            </div>
                        </div>
                        <textarea class="practice-code {{ theme }}" id="practiceCode">
{% if topic == 'python_basics' %}
# Practice: User Greeting Program
# TODO: Ask for user's name and age
# TODO: Print a personalized greeting

# Your code here

{% elif topic == 'web_basics' %}
<!-- Practice: Simple Web Page -->
<!-- TODO: Create a complete HTML page -->
<!-- TODO: Add CSS styling -->
<!-- TODO: Add JavaScript interaction -->

<!-- Your code here -->

{% else %}
# Write your practice code here
# Use the concepts you've learned

print("Start coding!")
{% endif %}
                        </textarea>
                    </div>
                    
                    <div class="practice-actions">
                        <button class="btn {{ theme }}" onclick="runPracticeCode()">
                            <i class="fas fa-play"></i> Run Code
                        </button>
                        <button class="btn {{ theme }} secondary" onclick="checkPracticeSolution()">
                            <i class="fas fa-check"></i> Check Solution
                        </button>
                        <button class="btn {{ theme }} outline" onclick="showHint()">
                            <i class="fas fa-lightbulb"></i> Get Hint
                        </button>
                    </div>
                    
                    <div class="practice-output {{ theme }}">
                        <h4><i class="fas fa-terminal"></i> Output</h4>
                        <pre id="practiceOutput">Run your code to see output here...</pre>
                    </div>
                </div>
            </div>
            
            <!-- Resources -->
            <div class="resources-section {{ theme }}">
                <h2><i class="fas fa-external-link-alt"></i> Additional Resources</h2>
                <div class="resources-grid {{ theme }}">
                    <a href="#" class="resource-card {{ theme }}">
                        <div class="resource-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Cheat Sheet</h4>
                            <p>Quick reference for {{ lesson.title|default('this lesson') }}</p>
                        </div>
                    </a>
                    
                    <a href="#" class="resource-card {{ theme }}">
                        <div class="resource-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Video Tutorial</h4>
                            <p>Watch detailed explanation videos</p>
                        </div>
                    </a>
                    
                    <a href="#" class="resource-card {{ theme }}">
                        <div class="resource-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Project Ideas</h4>
                            <p>Practice with real-world projects</p>
                        </div>
                    </a>
                    
                    <a href="#" class="resource-card {{ theme }}">
                        <div class="resource-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="resource-info">
                            <h4>FAQ</h4>
                            <p>Common questions and answers</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Lesson Navigation -->
        <div class="lesson-navigation {{ theme }}">
            <a href="#" class="nav-prev btn {{ theme }} outline">
                <i class="fas fa-arrow-left"></i> Previous Lesson
            </a>
            <div class="completion-status {{ theme }}">
                <button class="btn {{ theme }} success" onclick="completeLesson()">
                    <i class="fas fa-check-circle"></i> Mark as Complete
                </button>
                <span class="status-text">0/{{ lesson.content|length if lesson.content else 5 }} topics completed</span>
            </div>
            <a href="#" class="nav-next btn {{ theme }}">
                Next Lesson <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize code editors
    initCodeEditors();
    
    // Set up topic navigation
    setupTopicNavigation();
    
    // Load lesson progress
    loadLessonProgress();
    
    // Set up interactive elements
    setupInteractiveElements();
});

function initCodeEditors() {
    // Add line numbers to code blocks
    document.querySelectorAll('.code-block').forEach(block => {
        const lines = block.textContent.split('\n').length;
        const lineNumbers = document.createElement('div');
        lineNumbers.className = 'line-numbers';
        
        for (let i = 1; i <= lines; i++) {
            lineNumbers.innerHTML += `<span>${i}</span>`;
        }
        
        block.parentElement.insertBefore(lineNumbers, block);
    });
}

function setupTopicNavigation() {
    // Make topic cards clickable
    document.querySelectorAll('.topic-card').forEach(card => {
        card.addEventListener('click', function(e) {
            if (!e.target.closest('.topic-actions')) {
                const header = this.querySelector('.topic-header');
                header.classList.toggle('expanded');
            }
        });
    });
}

function loadLessonProgress() {
    // Load saved progress from localStorage
    const progress = localStorage.getItem(`lesson_${topic}_progress`) || '{}';
    const completedTopics = JSON.parse(progress);
    
    // Mark completed topics
    Object.keys(completedTopics).forEach(topicIndex => {
        const topicCard = document.querySelector(`.topic-card:nth-child(${parseInt(topicIndex) + 1})`);
        if (topicCard) {
            topicCard.classList.add('completed');
            const status = topicCard.querySelector('.nav-status');
            if (status) {
                status.className = 'nav-status completed';
                status.innerHTML = '<i class="fas fa-check"></i>';
            }
        }
    });
    
    // Update completion status
    updateCompletionStatus();
}

function updateCompletionStatus() {
    const completed = document.querySelectorAll('.topic-card.completed').length;
    const total = document.querySelectorAll('.topic-card').length;
    const statusText = document.querySelector('.status-text');
    if (statusText) {
        statusText.textContent = `${completed}/${total} topics completed`;
    }
    
    // Update progress bar
    const percent = (completed / total) * 100;
    const progressFill = document.querySelector('.progress-fill');
    if (progressFill) {
        progressFill.style.width = `${percent}%`;
    }
    const progressPercent = document.querySelector('.progress-percent');
    if (progressPercent) {
        progressPercent.textContent = `${Math.round(percent)}%`;
    }
}

function setupInteractiveElements() {
    // Add syntax highlighting to code blocks
    document.querySelectorAll('.code-block code').forEach(block => {
        const lang = topic.includes('python') ? 'python' : 
                    topic.includes('web') ? 'html' : 'python';
        highlightSyntax(block, lang);
    });
}

function highlightSyntax(element, language) {
    // Simple syntax highlighting
    const code = element.textContent;
    let highlighted = code;
    
    if (language === 'python') {
        // Highlight Python keywords
        const keywords = ['def', 'class', 'return', 'if', 'elif', 'else', 'for', 'while', 
                         'try', 'except', 'import', 'from', 'as', 'True', 'False', 'None'];
        
        keywords.forEach(keyword => {
            const regex = new RegExp(`\\b${keyword}\\b`, 'g');
            highlighted = highlighted.replace(regex, `<span class="keyword">${keyword}</span>`);
        });
        
        // Highlight strings
        highlighted = highlighted.replace(/(['"])(.*?)\1/g, '<span class="string">$1$2$1</span>');
        
        // Highlight comments
        highlighted = highlighted.replace(/#.*$/gm, '<span class="comment">$&</span>');
        
        // Highlight numbers
        highlighted = highlighted.replace(/\b\d+\b/g, '<span class="number">$&</span>');
    } else if (language === 'html') {
        // Highlight HTML tags
        highlighted = highlighted.replace(/&lt;\/?(\w+).*?&gt;/g, '<span class="tag">&lt;$1&gt;</span>');
    }
    
    element.innerHTML = highlighted;
}

function toggleExample(topicIndex) {
    const example = document.getElementById(`example-${topicIndex}`);
    const quiz = document.getElementById(`quiz-${topicIndex}`);
    
    if (example.style.display === 'none') {
        example.style.display = 'block';
        if (quiz) quiz.style.display = 'none';
    } else {
        example.style.display = 'none';
    }
}

function toggleQuiz(topicIndex) {
    const quiz = document.getElementById(`quiz-${topicIndex}`);
    const example = document.getElementById(`example-${topicIndex}`);
    
    if (quiz.style.display === 'none') {
        quiz.style.display = 'block';
        if (example) example.style.display = 'none';
    } else {
        quiz.style.display = 'none';
    }
}

function runExample(topicIndex) {
    const example = document.getElementById(`example-${topicIndex}`);
    const code = example.querySelector('code').textContent;
    
    // In a real implementation, this would send to server for execution
    // For now, simulate execution
    alert('Running example code... Check the browser console for output!');
    console.log('Executing example code:', code);
    
    // Mark topic as practiced
    markTopicPracticed(topicIndex);
}

function submitQuiz(topicIndex) {
    const quiz = document.getElementById(`quiz-${topicIndex}`);
    const selected = quiz.querySelector('input[type="radio"]:checked');
    
    if (!selected) {
        alert('Please select an answer!');
        return;
    }
    
    // Simple validation (in real app, check against correct answer)
    const isCorrect = Math.random() > 0.5; // Simulate random correctness
    
    if (isCorrect) {
        alert('üéâ Correct! Well done!');
        markTopicCompleted(topicIndex);
    } else {
        alert('‚ùå Not quite right. Try again!');
    }
}

function markTopicCompleted(topicIndex) {
    const topicCard = document.querySelector(`.topic-card:nth-child(${topicIndex})`);
    if (topicCard) {
        topicCard.classList.add('completed');
        
        // Save to localStorage
        const progress = JSON.parse(localStorage.getItem(`lesson_${topic}_progress`) || '{}');
        progress[topicIndex] = true;
        localStorage.setItem(`lesson_${topic}_progress`, JSON.stringify(progress));
        
        // Update UI
        updateCompletionStatus();
        
        // Show celebration for completing all topics
        const completed = document.querySelectorAll('.topic-card.completed').length;
        const total = document.querySelectorAll('.topic-card').length;
        if (completed === total) {
            showCompletionCelebration();
        }
    }
}

function markTopicPracticed(topicIndex) {
    const topicCard = document.querySelector(`.topic-card:nth-child(${topicIndex})`);
    if (topicCard && !topicCard.classList.contains('completed')) {
        topicCard.classList.add('practiced');
    }
}

function runPracticeCode() {
    const code = document.getElementById('practiceCode').value;
    const output = document.getElementById('practiceOutput');
    
    try {
        // Simulate code execution
        const result = simulateExecution(code);
        output.textContent = result;
        output.className = 'success';
        
        // Show success message
        showNotification('Code executed successfully!', 'success');
    } catch (error) {
        output.textContent = `Error: ${error.message}`;
        output.className = 'error';
        
        showNotification('Code execution failed', 'error');
    }
}

function simulateExecution(code) {
    // Very basic simulation
    if (code.includes('print') || code.includes('console.log')) {
        return "Hello, Coder!\nWelcome to Python Pathfinder!\nYour code executed successfully.";
    } else if (code.includes('TODO') || code.trim() === '') {
        return "Please write some code before running.";
    } else {
        return "Code executed. No output generated.";
    }
}

function checkPracticeSolution() {
    const code = document.getElementById('practiceCode').value;
    
    // Simple validation based on topic
    let isValid = false;
    let feedback = '';
    
    if (topic === 'python_basics') {
        isValid = code.includes('input(') && code.includes('print(');
        feedback = isValid ? 
            "‚úÖ Perfect! You're using input() and print() correctly!" :
            "‚ö†Ô∏è Make sure to use input() to get user data and print() to display results.";
    } else if (topic === 'web_basics') {
        isValid = code.includes('<html>') && code.includes('<body>');
        feedback = isValid ?
            "‚úÖ Great! You have the basic HTML structure!" :
            "‚ö†Ô∏è Remember to include <html> and <body> tags in your HTML.";
    } else {
        isValid = code.trim().length > 10;
        feedback = isValid ?
            "‚úÖ Good attempt! Keep practicing!" :
            "‚ö†Ô∏è Try writing more code to complete the challenge.";
    }
    
    alert(feedback);
    
    if (isValid) {
        showNotification('Challenge completed! +50 XP', 'success');
        // In real app, would award XP and update progress
    }
}

function showHint() {
    const hints = {
        'python_basics': 'Use the input() function to get user input and print() to display results.',
        'web_basics': 'Start with the basic HTML structure: <html><head><title></title></head><body></body></html>',
        'advanced_python': 'Define a class with __init__ method and create instance methods for operations.',
        'database': 'Use CREATE TABLE to define structure and INSERT to add data.'
    };
    
    const hint = hints[topic] || 'Try breaking the problem into smaller steps and test each part.';
    alert(`üí° Hint: ${hint}`);
}

function completeLesson() {
    const completed = document.querySelectorAll('.topic-card.completed').length;
    const total = document.querySelectorAll('.topic-card').length;
    
    if (completed === total) {
        // Show celebration
        showCompletionCelebration();
        
        // Update progress
        localStorage.setItem(`lesson_${topic}_completed`, 'true');
        
        // Award XP
        showNotification(`üéâ Lesson Completed! +100 XP`, 'success');
        
        // Update button
        const completeBtn = document.querySelector('.completion-status .btn');
        if (completeBtn) {
            completeBtn.innerHTML = '<i class="fas fa-check-double"></i> Completed';
            completeBtn.classList.remove('success');
            completeBtn.classList.add('completed');
            completeBtn.disabled = true;
        }
    } else {
        alert(`Complete all ${total} topics first! You've completed ${completed}/${total}.`);
    }
}

function showCompletionCelebration() {
    // Create celebration elements
    const celebration = document.createElement('div');
    celebration.className = `celebration ${theme}`;
    celebration.innerHTML = `
        <div class="celebration-content">
            <div class="celebration-icon">üéâ</div>
            <h3>Lesson Completed!</h3>
            <p>You've mastered ${lesson.title}</p>
            <div class="rewards">
                <span class="reward">+100 XP</span>
                <span class="reward">üèÜ Achievement Unlocked</span>
            </div>
            <button class="btn ${theme}" onclick="this.parentElement.parentElement.remove()">
                Continue Learning
            </button>
        </div>
    `;
    
    celebration.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        animation: fadeIn 0.3s ease;
    `;
    
    document.body.appendChild(celebration);
    
    // Add confetti
    createConfetti();
}

function createConfetti() {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
    `;
    
    document.body.appendChild(confetti);
    
    // Create confetti pieces
    const colors = theme === 'cute' ? 
        ['#ff9ed8', '#a6e3ff', '#ffd166', '#a8e6cf'] :
        ['#ff4655', '#1fc0ff', '#00ff9d', '#ffd166'];
    
    for (let i = 0; i < 100; i++) {
        const piece = document.createElement('div');
        piece.style.cssText = `
            position: absolute;
            width: ${8 + Math.random() * 8}px;
            height: ${8 + Math.random() * 8}px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            top: -20px;
            left: ${Math.random() * 100}%;
            border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
            animation: fall ${2 + Math.random() * 3}s linear forwards;
            transform: rotate(${Math.random() * 360}deg);
        `;
        confetti.appendChild(piece);
    }
    
    setTimeout(() => confetti.remove(), 3000);
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `lesson-notification ${type} ${theme}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 10001;
        animation: slideInRight 0.3s ease-out;
    `;
    
    if (theme === 'cute') {
        notification.style.background = 'white';
        notification.style.border = '2px solid var(--cute-primary)';
        notification.style.color = 'var(--cute-text)';
    } else {
        notification.style.background = 'var(--deadly-secondary)';
        notification.style.border = '1px solid var(--deadly-accent)';
        notification.style.color = 'var(--deadly-text)';
    }
    
    if (type === 'success') {
        notification.style.borderColor = '#4CAF50';
    } else if (type === 'error') {
        notification.style.borderColor = '#F44336';
    }
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-out forwards';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutRight {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}

@keyframes fall {
    to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.topic-card.completed {
    border-color: #4CAF50 !important;
}

.topic-card.completed .topic-header {
    background: rgba(76, 175, 80, 0.1) !important;
}

.topic-card.practiced {
    border-color: #FF9800 !important;
}

.code-block {
    position: relative;
    padding-left: 40px;
}

.line-numbers {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 30px;
    background: rgba(0, 0, 0, 0.05);
    padding: 10px 5px;
    font-family: monospace;
    font-size: 0.9em;
    line-height: 1.5;
    text-align: right;
    border-right: 1px solid rgba(0, 0, 0, 0.1);
}

.line-numbers span {
    display: block;
}

.code-block .keyword { color: #ff6b6b; font-weight: bold; }
.code-block .string { color: #4ecdc4; }
.code-block .comment { color: #999; font-style: italic; }
.code-block .number { color: #ffd166; }
.code-block .tag { color: #1a73e8; }

.practice-output.success {
    color: #4CAF50;
    border-color: #4CAF50 !important;
}

.practice-output.error {
    color: #F44336;
    border-color: #F44336 !important;
}

.celebration-content {
    background: white;
    padding: 3rem;
    border-radius: 20px;
    text-align: center;
    max-width: 500px;
    animation: pulse 2s infinite;
}

.celebration.deadly .celebration-content {
    background: var(--deadly-secondary);
    color: var(--deadly-text);
    border: 2px solid var(--deadly-accent);
}

.celebration-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.rewards {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin: 1rem 0;
}

.reward {
    padding: 0.5rem 1rem;
    background: rgba(76, 175, 80, 0.1);
    border-radius: 20px;
    font-weight: bold;
}
`;
document.head.appendChild(style);
</script>

<style>
.lessons-container {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
    padding: 2rem;
    min-height: 100vh;
    max-width: 1400px;
    margin: 0 auto;
}

/* Sidebar */
.lesson-sidebar {
    position: sticky;
    top: 2rem;
    height: fit-content;
    border-radius: 15px;
    padding: 1.5rem;
}

.lesson-sidebar.cute {
    background: white;
    border: 3px solid var(--cute-primary);
}

.lesson-sidebar.deadly {
    background: var(--deadly-secondary);
    border: 2px solid var(--deadly-primary);
}

.sidebar-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.lesson-sidebar.cute .sidebar-header {
    --border-color: var(--cute-secondary);
}

.lesson-sidebar.deadly .sidebar-header {
    --border-color: #444;
}

.sidebar-header h2 {
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
}

.lesson-sidebar.cute .sidebar-header h2 {
    color: var(--cute-primary);
}

.lesson-sidebar.deadly .sidebar-header h2 {
    color: var(--deadly-accent);
}

.course-progress {
    margin-bottom: 2rem;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.progress-label {
    opacity: 0.8;
}

.progress-percent {
    font-weight: bold;
}

.lesson-sidebar.cute .progress-percent {
    color: var(--cute-primary);
}

.lesson-sidebar.deadly .progress-percent {
    color: var(--deadly-accent);
}

.progress-bar {
    height: 8px;
    background: var(--progress-bg);
    border-radius: 4px;
    overflow: hidden;
}

.lesson-sidebar.cute .progress-bar {
    --progress-bg: var(--cute-secondary);
}

.lesson-sidebar.deadly .progress-bar {
    --progress-bg: #444;
}

.progress-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease;
}

.lesson-sidebar.cute .progress-fill {
    background: var(--cute-primary);
}

.lesson-sidebar.deadly .progress-fill {
    background: var(--deadly-accent);
}

.lesson-nav {
    margin-bottom: 2rem;
}

.nav-section {
    margin-bottom: 1.5rem;
}

.section-title {
    font-size: 1rem;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.lesson-sidebar.cute .section-title {
    --border-color: var(--cute-secondary);
    color: var(--cute-text);
}

.lesson-sidebar.deadly .section-title {
    --border-color: #444;
    color: var(--deadly-text);
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    margin-bottom: 0.25rem;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.nav-item.cute {
    color: var(--cute-text);
    background: var(--cute-bg);
}

.nav-item.deadly {
    color: var(--deadly-text);
    background: rgba(255, 255, 255, 0.05);
}

.nav-item:hover {
    transform: translateX(5px);
}

.nav-item.cute:hover {
    background: var(--cute-primary);
    color: white;
}

.nav-item.deadly:hover {
    background: var(--deadly-primary);
    color: white;
}

.nav-item.active {
    font-weight: bold;
}

.nav-item.cute.active {
    background: var(--cute-primary);
    color: white;
}

.nav-item.deadly.active {
    background: var(--deadly-primary);
    color: white;
}

.nav-icon {
    width: 24px;
    text-align: center;
}

.nav-text {
    flex: 1;
}

.nav-status {
    font-size: 0.8rem;
}

.nav-status.completed {
    color: #4CAF50;
}

.nav-status.in-progress {
    color: #FF9800;
    animation: spin 2s linear infinite;
}

.nav-status.locked {
    color: #9E9E9E;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.sidebar-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
}

.lesson-sidebar.cute .sidebar-footer {
    --border-color: var(--cute-secondary);
}

.lesson-sidebar.deadly .sidebar-footer {
    --border-color: #444;
}

.achievement-count {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.lesson-sidebar.cute .achievement-count {
    color: var(--cute-text);
}

.lesson-sidebar.deadly .achievement-count {
    color: var(--deadly-text);
}

/* Main Content */
.lesson-content {
    min-width: 0; /* Prevent grid overflow */
}

.lesson-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.lesson-content.cute .lesson-header {
    --border-color: var(--cute-secondary);
}

.lesson-content.deadly .lesson-header {
    --border-color: #444;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    font-size: 0.9rem;
}

.breadcrumbs a {
    text-decoration: none;
    color: var(--link-color);
}

.breadcrumbs.cute a {
    --link-color: var(--cute-primary);
}

.breadcrumbs.deadly a {
    --link-color: var(--deadly-accent);
}

.breadcrumbs span {
    opacity: 0.8;
}

.lesson-title {
    font-size: 2rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.lesson-content.cute .lesson-title {
    color: var(--cute-primary);
}

.lesson-content.deadly .lesson-title {
    color: var(--deadly-accent);
}

.lesson-meta {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.lesson-content.cute .meta-item {
    color: var(--cute-text);
}

.lesson-content.deadly .meta-item {
    color: var(--deadly-text);
}

/* Lesson Body Sections */
.lesson-body > div {
    margin-bottom: 2.5rem;
}

.lesson-body h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.lesson-content.cute h2 {
    color: var(--cute-text);
}

.lesson-content.deadly h2 {
    color: var(--deadly-text);
}

.lesson-overview p {
    line-height: 1.6;
    font-size: 1.1rem;
}

.objectives-list {
    list-style: none;
    padding: 0;
}

.objectives-list li {
    padding: 0.75rem;
    margin-bottom: 0.5rem;
    border-radius: 8px;
    position: relative;
    padding-left: 2.5rem;
}

.objectives-list.cute li {
    background: var(--cute-bg);
    border: 2px solid var(--cute-secondary);
}

.objectives-list.deadly li {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #444;
}

.objectives-list li:before {
    content: "‚úì";
    position: absolute;
    left: 1rem;
    font-weight: bold;
}

.objectives-list.cute li:before {
    color: var(--cute-primary);
}

.objectives-list.deadly li:before {
    color: var(--deadly-accent);
}

/* Topics */
.topics-grid {
    display: grid;
    gap: 1rem;
}

.topic-card {
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.3s ease;
}

.topic-card.cute {
    background: white;
    border: 2px solid var(--cute-secondary);
}

.topic-card.deadly {
    background: var(--deadly-secondary);
    border: 1px solid #444;
}

.topic-header {
    padding: 1.25rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
}

.topic-card.cute .topic-header {
    background: var(--cute-bg);
}

.topic-card.deadly .topic-header {
    background: rgba(255, 255, 255, 0.05);
}

.topic-header:hover {
    transform: translateX(5px);
}

.topic-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.2rem;
}

.topic-card.cute .topic-number {
    background: var(--cute-primary);
    color: white;
}

.topic-card.deadly .topic-number {
    background: var(--deadly-primary);
    color: white;
}

.topic-header h3 {
    margin: 0;
    font-size: 1.2rem;
}

.topic-body {
    padding: 1.25rem;
    padding-top: 0;
}

.topic-body p {
    margin-bottom: 1rem;
    line-height: 1.6;
}

.topic-actions {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.topic-example,
.topic-quiz {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 8px;
}

.topic-card.cute .topic-example,
.topic-card.cute .topic-quiz {
    background: var(--cute-bg);
    border: 2px solid var(--cute-secondary);
}

.topic-card.deadly .topic-example,
.topic-card.deadly .topic-quiz {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid #444;
}

.code-block {
    background: var(--code-bg);
    padding: 1rem;
    border-radius: 5px;
    overflow-x: auto;
    margin-bottom: 1rem;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    position: relative;
}

.topic-card.cute .code-block {
    --code-bg: #2d2d2d;
    color: #f8f8f2;
}

.topic-card.deadly .code-block {
    --code-bg: #1a1a1a;
    color: #ffffff;
}

.quiz-question {
    margin-bottom: 1rem;
    font-weight: 500;
}

.quiz-options {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.quiz-option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.topic-card.cute .quiz-option {
    background: white;
    border: 2px solid var(--cute-secondary);
}

.topic-card.deadly .quiz-option {
    background: var(--deadly-secondary);
    border: 1px solid #444;
}

.quiz-option:hover {
    transform: translateX(5px);
}

.topic-card.cute .quiz-option:hover {
    background: var(--cute-primary);
    color: white;
}

.topic-card.deadly .quiz-option:hover {
    background: var(--deadly-primary);
    color: white;
}

.quiz-option input[type="radio"] {
    margin: 0;
}

/* Practice Section */
.practice-card {
    border-radius: 15px;
    overflow: hidden;
}

.practice-card.cute {
    background: white;
    border: 3px solid var(--cute-primary);
}

.practice-card.deadly {
    background: var(--deadly-secondary);
    border: 2px solid var(--deadly-primary);
}

.practice-header {
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.practice-card.cute .practice-header {
    --border-color: var(--cute-secondary);
    background: var(--cute-bg);
}

.practice-card.deadly .practice-header {
    --border-color: #444;
    background: rgba(255, 255, 255, 0.05);
}

.difficulty-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: bold;
}

.practice-card.cute .difficulty-badge {
    background: var(--cute-accent);
    color: white;
}

.practice-card.deadly .difficulty-badge {
    background: var(--deadly-accent);
    color: white;
}

.practice-description {
    padding: 1.5rem;
}

.practice-description p {
    line-height: 1.6;
    font-size: 1.1rem;
}

.code-editor-practice {
    margin: 0 1.5rem 1.5rem;
    border-radius: 8px;
    overflow: hidden;
}

.editor-header {
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.practice-card.cute .editor-header {
    background: var(--cute-primary);
    color: white;
}

.practice-card.deadly .editor-header {
    background: var(--deadly-primary);
    color: white;
}

.editor-actions {
    display: flex;
    gap: 0.5rem;
}

.editor-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.editor-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.practice-code {
    width: 100%;
    min-height: 200px;
    padding: 1rem;
    border: none;
    resize: vertical;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
}

.practice-card.cute .practice-code {
    background: white;
    color: #333;
}

.practice-card.deadly .practice-code {
    background: #1a1a1a;
    color: #ffffff;
}

.practice-actions {
    padding: 0 1.5rem 1.5rem;
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.practice-output {
    margin: 0 1.5rem 1.5rem;
    padding: 1rem;
    border-radius: 8px;
    min-height: 100px;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    white-space: pre-wrap;
}

.practice-card.cute .practice-output {
    background: white;
    border: 2px solid var(--cute-secondary);
    color: #333;
}

.practice-card.deadly .practice-output {
    background: #1a1a1a;
    border: 1px solid #444;
    color: #ffffff;
}

/* Resources */
.resources-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

.resource-card {
    padding: 1.5rem;
    border-radius: 10px;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
}

.resource-card.cute {
    background: white;
    border: 2px solid var(--cute-secondary);
    color: var(--cute-text);
}

.resource-card.deadly {
    background: var(--deadly-secondary);
    border: 1px solid #444;
    color: var(--deadly-text);
}

.resource-card:hover {
    transform: translateY(-5px);
}

.resource-card.cute:hover {
    background: var(--cute-primary);
    color: white;
    border-color: var(--cute-primary);
}

.resource-card.deadly:hover {
    background: var(--deadly-primary);
    color: white;
    border-color: var(--deadly-primary);
}

.resource-icon {
    font-size: 1.5rem;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.resource-card.cute .resource-icon {
    background: var(--cute-bg);
    color: var(--cute-primary);
}

.resource-card.deadly .resource-icon {
    background: rgba(255, 255, 255, 0.1);
    color: var(--deadly-accent);
}

.resource-info h4 {
    margin-bottom: 0.25rem;
}

.resource-info p {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Lesson Navigation */
.lesson-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 2rem;
    border-top: 1px solid var(--border-color);
}

.lesson-content.cute .lesson-navigation {
    --border-color: var(--cute-secondary);
}

.lesson-content.deadly .lesson-navigation {
    --border-color: #444;
}

.completion-status {
    text-align: center;
}

.completion-status .btn.completed {
    background: #4CAF50;
    color: white;
    cursor: default;
}

.status-text {
    display: block;
    margin-top: 0.5rem;
    font-size: 0.9rem;
    opacity: 0.8;
}

@media (max-width: 1024px) {
    .lessons-container {
        grid-template-columns: 1fr;
    }
    
    .lesson-sidebar {
        position: static;
        margin-bottom: 2rem;
    }
}

@media (max-width: 768px) {
    .lessons-container {
        padding: 1rem;
    }
    
    .lesson-navigation {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .practice-actions {
        justify-content: center;
    }
    
    .lesson-meta {
        justify-content: center;
    }
}
</style>
{% endblock %}